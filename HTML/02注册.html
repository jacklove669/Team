<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="../css/02注册.css">
	<style>

	</style>
</head>
<body>
<!-- <label for="phone"></label><input  type="text" id="phone" placeholder="请输入手机号" >
 <label for="user"> <input class="int1" type="Password" id="user"  placeholder="个人账号" >
  <label for="pass"> <input class="int2" type="Password" id="pass"  placeholder="输入密码" >
<button>注册</button> -->


	<div class="box">
	 <div class="boxt">
		<div class="bt">
			<img src="" alt="">
			<h2>账号注册</h2>
		</div>
		
		
			<div class="zh">
			    <span>
			     	<label for="phone"></label><input type="text" id="phone" placeholder="请输入手机号" >
			    </span>

			</div>
			<div class="tishi"><span id="span"></span></div>

			<div class="mima">
				<span>
				   <label for="user"> <input type="Password" id="user"  placeholder="个人账号" >
				</span>
			</div>	
			<div class="tishi"><span id="spans2"></span></div>
			<div class="mima">
				<span>
				   <label for="pass"> <input type="Password" id="pass"  placeholder="输入密码" >
				</span>
			</div>	
			<div class="tishi"><span id="spans3"></span></div>
		

		<div class="dl">
				<button  >注册</button>
				
		</div>
		<div class="qt">
			<span class="co">其他方式注册</span>

		</div>
		<div class="logo">
			<a href="https://open.weixin.qq.com/connect/qrconnect?appid=wx8b6c0245e6c3b038&redirect_uri=https%3A%2F%2Fhwid1.vmall.com%2FCAS%2Fweixin%2Freturn&response_type=code&scope=snsapi_login&state=as3Cyu3rBASxts4VMCvCxkS8tXQDatjs#wechat_redirect" class="ao"></a>
			<a href="https://weibo.com/?sudaref=www.baidu.com&display=0&retcode=6102" class="at"></a>
			<a href="https://graph.qq.com/oauth2.0/show?which=Login&display=pc&client_id=209207&redirect_uri=https://hwid1.vmall.com/CAS/qq/return&response_type=code&state=fPLvUdVRQwCZ27jPFbn5MCVjZ8xp27rh&scope=get_user_info,add_topic,add_one_blog,add_album,upload_pic,list_album,add_share,check_page_fans,add_t,add_pic_t,del_t,get_repost_list,get_info,get_other_info,get_fanslist,get_idollist,add_idol,del_ido,get_tenpay_addr" class="as"></a>
		</div>


		
		
	</div>	
	</div>
	<script type="text/javascript">
		var phone = document.querySelector('#phone');
		var user = document.querySelector('#user');
		var pass = document.querySelector('#pass');
		var btn = document.querySelector('button');
		
		var sp = document.querySelector('#span');
		var sps2 = document.querySelector('#spans2');
		var sps3 = document.querySelector('#spans3');

		btn.onblur = function () {
			var reg = /^(\(\d{3,4}\)|\d{3,4}-)?\d{7,8}$/;
			if (reg.test(phone.value)) {
				sp.innerHTML = "格式正确";
				sp.style.color = "green";
			}else if(!phone.value){
				sp.innerHTML = "不能为空";
				sp.style.color = "red";
			}else{
				sp.innerHTML = "格式错误";
				sp.style.color = "red";
			}

			var reg4 = /^\w+$/;
			// if (reg4.test(txt4.value)) {
			// 	sps2.innerHTML = "格式正确";
			// 	sps2.style.color = "green";
			// }else 
			if(!user.value){
				sps2.innerHTML = "不能为空";
				sps2.style.color = "red";
			}else{
				sps2.innerHTML = "格式错误";
				sps2.style.color = "red";
			}
			var reg5 = /^\w+$/;
			// if (reg5.test(txt5.value)) {
			// 	sps3.innerHTML = "格式正确";
			// 	sps3.style.color = "green";
			// }else 
			if(!pass.value){
				sps3.innerHTML = "不能为空";
				sps3.style.color = "red";
			}else{
				sps3.innerHTML = "账号或密码错误";
				sps3.style.color = "red";
			}
		}
			

	

		
			
		
	btn.onclick = function () {
			var xhr = new XMLHttpRequest();
			xhr.open('post',"http://192.168.1.5/archives/register.php");
			// post 请求需要加请求头
			xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
			// send('传递的参数')
			xhr.send('userName=' + user.value + '&passWord=' + pass.value )
			xhr.onreadystatechange = function () {
				if (xhr.readyState == 4) {
					var obj = JSON.parse(xhr.responseText)
					console.log(obj.responseCode)
					if (obj.responseCode == 0) {
						alert('注册成功')
						location.href='01登录.html'
						
					}else if(obj.responseCode == 1){
						alert('用户名已存在')
						// location.href ='http://www.baidu.com'
					}else{
						alert('注册失败')
					}
					// else{
					// 	alert('登录成功')
					// 	location.href ='http://www.baidu.com'
					// }
				}
			}
		}
		
			


	</script>
</body>
</html>